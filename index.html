
<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Daily Milk Record Pro</title>
    <style>
        /* Modern UI Design */
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; margin: 0; padding: 0; background-color: #f0f4f8; color: #333; }

        /* Auth Screen Styling */
        .auth-screen { display: flex; flex-direction: column; justify-content: center; align-items: center; height: 100vh; background: #007bff; color: white; position: fixed; top: 0; left: 0; width: 100%; z-index: 200; }
        .login-box { background: white; padding: 25px; border-radius: 15px; box-shadow: 0 10px 25px rgba(0,0,0,0.2); text-align: center; width: 85%; max-width: 350px; color: #333; }
        .login-box input { width: 100%; padding: 12px; margin: 10px 0; border: 1px solid #ddd; border-radius: 8px; font-size: 16px; box-sizing: border-box; }
        
        /* App Header - Blue as per your Image */
        header { background-color: #007bff; color: white; padding: 15px; display: flex; justify-content: space-between; align-items: center; position: sticky; top: 0; z-index: 100; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
        .menu-icon { font-size: 24px; cursor: pointer; }
        
        /* Sidebar */
        #sidebar { height: 100%; width: 0; position: fixed; z-index: 150; top: 0; left: 0; background-color: #111; overflow-x: hidden; transition: 0.4s; padding-top: 60px; }
        #sidebar a { padding: 15px 32px; text-decoration: none; font-size: 18px; color: #818181; display: block; border-bottom: 1px solid #222; }

        /* Container */
        .container { padding: 15px; max-width: 500px; margin: auto; }
        
        /* Stats Card */
        .total-box { background: #28a745; color: white; padding: 20px; border-radius: 12px; text-align: center; margin-bottom: 20px; box-shadow: 0 4px 10px rgba(40,167,69,0.2); }
        .total-amount { font-size: 30px; font-weight: 800; }

        /* Entry Card */
        .card { background: white; padding: 20px; border-radius: 15px; box-shadow: 0 2px 8px rgba(0,0,0,0.05); margin-bottom: 20px; border: 1px solid #eef; }
        .form-group { margin-bottom: 12px; position: relative; }
        .form-group label { display: block; font-weight: bold; margin-bottom: 5px; color: #555; font-size: 14px; }
        .form-group input, .form-group select { width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 8px; font-size: 16px; box-sizing: border-box; background: #fafafa; }
        
        .voice-btn { position: absolute; right: 8px; top: 28px; background: #28a745; color: white; border: none; border-radius: 50%; width: 32px; height: 32px; cursor: pointer; }

        /* Blue Save Button as per image */
        .btn-save { background-color: #007bff; color: white; border: none; padding: 14px; border-radius: 8px; font-size: 18px; cursor: pointer; width: 100%; font-weight: bold; margin-top: 10px; display: flex; align-items: center; justify-content: center; gap: 10px; }

        /* Professional Record List (Clean & Fast) */
        .record-item { background: white; padding: 12px; border-radius: 10px; margin-bottom: 10px; display: flex; justify-content: space-between; align-items: center; border: 1px solid #eee; border-left: 5px solid #007bff; }
        .record-item.pay-type { border-left-color: #ff4d4d; }
        
        .record-info { display: flex; flex-direction: column; }
        .record-name { font-size: 16px; font-weight: 700; color: #222; }
        .record-date { font-size: 11px; color: #888; }
        .record-badge { font-size: 10px; padding: 2px 5px; border-radius: 4px; font-weight: bold; width: fit-content; margin-bottom: 4px; }
        .badge-milk { background: #e7f3ff; color: #007bff; }
        .badge-pay { background: #fee; color: #ff4d4d; }
        
        .record-amount { text-align: right; font-weight: 800; font-size: 17px; }
        .amt-green { color: #28a745; }
        .amt-red { color: #ff4d4d; }

        .btn-del { background: #ff4d4d; color: white; border: none; padding: 8px; border-radius: 8px; cursor: pointer; }

        .search-bar { width: 100%; padding: 12px 12px 12px 40px; border: 2px solid #007bff; border-radius: 25px; outline: none; box-sizing: border-box; background: white; }

        @media print {
            #sidebar, header, .form-card, .btn-del, .voice-btn, .auth-screen { display: none !important; }
            #app-screen, .container { display: block !important; width: 100%; }
            .record-item { border: 1px solid #ddd; }
        }
    </style>
</head>
<body>

    <div id="auth-box" class="auth-screen" style="display:none;">
        <div class="login-box" id="reg-form">
            <h2>üÜï Account Banayein</h2>
            <input type="text" id="ru" placeholder="Username">
            <input type="password" id="rp" placeholder="Password">
            <input type="text" id="rs" placeholder="Secret Code (Security)">
            <button class="btn-save" onclick="register()">Create Account</button>
        </div>
        <div class="login-box" id="log-form" style="display:none;">
            <h2>üîê Login Karein</h2>
            <input type="text" id="lu" placeholder="User ID">
            <input type="password" id="lp" placeholder="Password">
            <button class="btn-save" onclick="login()">Login</button>
        </div>
    </div>

    <div id="main-app" style="display:none;">
        <div id="sidebar">
            <a href="javascript:void(0)" onclick="closeNav()" style="font-size:30px; color:white;">&times; Close</a>
            <a href="#" onclick="logout()">üö™ Logout</a>
            <a href="#" onclick="resetData()" style="color:red">üóëÔ∏è Delete All Data</a>
        </div>

        <header>
            <span class="menu-icon" onclick="openNav()">&#9776;</span>
            <span>Daily Milk Record</span>
            <span onclick="window.print()" style="font-size: 24px; cursor: pointer;">üñ®Ô∏è</span>
        </header>

        <div class="container">
            <div class="total-box">
                <div style="font-size:12px;">NET BALANCE (KUL BAAKI)</div>
                <div class="total-amount">‚Çπ <span id="grandTotal">0</span></div>
            </div>

            <div class="card form-card">
                <div class="form-group">
                    <label>Entry Type</label>
                    <select id="type" onchange="toggleInputs()">
                        <option value="milk">ü•õ Milk (Doodh)</option>
                        <option value="pay">üí∏ Advance / Payment</option>
                    </select>
                </div>

                <div class="form-group">
                    <label>Customer Name</label>
                    <input type="text" id="cust-name" placeholder="Naam likhein...">
                    <button class="voice-btn" onclick="startVoice()">üé§</button>
                </div>

                <div id="milk-inputs" style="display: flex; gap: 10px;">
                    <div class="form-group" style="flex:1">
                        <label>Liter (L)</label>
                        <input type="number" id="liters" placeholder="0">
                    </div>
                    <div class="form-group" style="flex:1">
                        <label>Rate (‚Çπ)</label>
                        <input type="number" id="rate" value="60">
                    </div>
                </div>

                <div id="pay-inputs" class="form-group" style="display:none;">
                    <label>Amount (‚Çπ Paisa)</label>
                    <input type="number" id="amt" placeholder="0">
                </div>

                <button class="btn-save" onclick="saveEntry()">‚úÖ Save Entry</button>
            </div>

            <div class="form-group" style="position:relative;">
                <span style="position:absolute; left:15px; top:12px; color:#007bff;">üîç</span>
                <input type="text" id="search" onkeyup="filter()" class="search-bar" placeholder="Naam se search karein...">
            </div>

            <div id="list"></div>
        </div>
    </div>

    <script>
        let db = JSON.parse(localStorage.getItem('milk_db')) || [];
        let authData = JSON.parse(localStorage.getItem('milk_auth')) || null;

        window.onload = () => {
            if(localStorage.getItem('isLoggedIn')) showMain();
            else checkAuth();
        };

        function checkAuth() {
            document.getElementById('auth-box').style.display = 'flex';
            if(authData) {
                document.getElementById('reg-form').style.display = 'none';
                document.getElementById('log-form').style.display = 'block';
            }
        }

        function register() {
            let u = document.getElementById('ru').value, p = document.getElementById('rp').value, s = document.getElementById('rs').value;
            if(u && p && s) {
                authData = {u, p, s};
                localStorage.setItem('milk_auth', JSON.stringify(authData));
                checkAuth();
            }
        }

        function login() {
            let u = document.getElementById('lu').value, p = document.getElementById('lp').value;
            if(authData && u === authData.u && p === authData.p) {
                localStorage.setItem('isLoggedIn', 'true');
                showMain();
            } else { alert("Galat ID/Password!"); }
        }

        function showMain() {
            document.getElementById('auth-box').style.display = 'none';
            document.getElementById('main-app').style.display = 'block';
            render();
        }

        function toggleInputs() {
            let t = document.getElementById('type').value;
            document.getElementById('milk-inputs').style.display = (t === 'milk') ? 'flex' : 'none';
            document.getElementById('pay-inputs').style.display = (t === 'pay') ? 'block' : 'none';
        }

        function saveEntry() {
            let n = document.getElementById('cust-name').value, t = document.getElementById('type').value;
            if(!n) return;

            let entry = { id: Date.now(), name: n, type: t, date: new Date().toLocaleDateString('en-GB') + " " + new Date().toLocaleTimeString([], {hour:'2-digit', minute:'2-digit'}) };

            if(t === 'milk') {
                let l = parseFloat(document.getElementById('liters').value), r = parseFloat(document.getElementById('rate').value);
                if(isNaN(l)) return;
                entry.total = l * r;
                entry.desc = l + "L @ ‚Çπ" + r;
            } else {
                let a = parseFloat(document.getElementById('amt').value);
                if(isNaN(a)) return;
                entry.total = -a;
                entry.desc = "Payment Rec.";
            }

            db.unshift(entry);
            localStorage.setItem('milk_db', JSON.stringify(db));
            render();
            document.getElementById('cust-name').value = '';
            document.getElementById('liters').value = '';
            document.getElementById('amt').value = '';
        }

        function render(items = db) {
            let list = document.getElementById('list'), total = 0;
            list.innerHTML = '';
            items.forEach(e => {
                total += e.total;
                let isPay = e.type === 'pay';
                list.innerHTML += `
                    <div class="record-item ${isPay ? 'pay-type' : ''}">
                        <div class="record-info">
                            <span class="record-badge ${isPay ? 'badge-pay' : 'badge-milk'}">${isPay ? 'PAYMENT' : 'MILK'}</span>
                            <span class="record-name">${e.name}</span>
                            <span class="record-date">${e.date}</span>
                            <small>${e.desc}</small>
                        </div>
                        <div style="display:flex; align-items:center; gap:10px;">
                            <div class="record-amount ${isPay ? 'amt-red' : 'amt-green'}">
                                ${isPay ? '-' : ''}‚Çπ${Math.abs(e.total)}
                            </div>
                            <button class="btn-del" onclick="del(${e.id})">üóëÔ∏è</button>
                        </div>
                    </div>`;
            });
            document.getElementById('grandTotal').innerText = total.toFixed(1);
        }

        function del(id) { if(confirm("Delete?")) { db = db.filter(i => i.id !== id); localStorage.setItem('milk_db', JSON.stringify(db)); render(); } }
        function filter() { let q = document.getElementById('search').value.toLowerCase(); render(db.filter(i => i.name.toLowerCase().includes(q))); }
        function openNav() { document.getElementById("sidebar").style.width = "280px"; }
        function closeNav() { document.getElementById("sidebar").style.width = "0"; }
        function logout() { localStorage.removeItem('isLoggedIn'); location.reload(); }
        function resetData() { if(confirm("Clear All?")) { db = []; localStorage.setItem('milk_db', '[]'); render(); closeNav(); } }
        function startVoice() {
            if ('webkitSpeechRecognition' in window) {
                let r = new webkitSpeechRecognition(); r.lang = 'hi-IN'; r.start();
                r.onresult = (e) => document.getElementById('cust-name').value = e.results[0][0].transcript;
            }
        }
    </script>
</body>
</html>
